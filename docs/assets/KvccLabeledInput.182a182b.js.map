{"version":3,"file":"KvccLabeledInput.182a182b.js","sources":["../../src/types/input.ts","../../src/stories/KvccLabeledInput.vue"],"sourcesContent":["export enum InputType {\n  TEXT = \"text\",\n  EMAIL = \"email\",\n  PASSWORD = \"password\",\n  SEARCH = \"search\",\n}\n\nexport const isInputType = (value: unknown): value is InputType => {\n  if (typeof value !== \"string\") return false;\n\n  return Object.values(InputType).includes(value as InputType);\n};\n","<script setup lang=\"ts\">\nimport { computed, ref } from \"vue\";\nimport \"../styles/main.css\";\nimport { InputType } from \"../types/input\";\nimport KvccFormControl from \"./KvccFormControl.vue\";\n\ninterface Props {\n  label: string;\n  type?: InputType;\n  id: string /* required for linking label to input */;\n  placeholder?: string;\n  required?: boolean;\n  listId?: string;\n  value?: string;\n}\n\ninterface Emits {\n  (event: \"input\", value: string): void;\n}\n\nconst props = defineProps<Props>();\nconst emit = defineEmits<Emits>();\n\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email#basic_validation\nconst emailRegexp =\n  /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n\nconst _value = ref(props.value);\n\nconst _type = computed(() => (props.type ? props.type : InputType.TEXT));\nconst _class = computed(() => ({\n  valid: _value.value ? emailRegexp.test(_value.value) : false,\n}));\n\nconst handleInput = (event: Event) => {\n  if (!event.target) {\n    console.error(\"No target found in event\");\n    return;\n  }\n\n  emit(\"input\", (event.target as HTMLInputElement).value);\n};\n</script>\n\n<template>\n  <KvccFormControl :input-id=\"id\" :label=\"label\" :required=\"required\">\n    <!-- eslint-disable-next-line vuejs-accessibility/form-control-has-label -->\n    <input\n      @input=\"handleInput\"\n      :class=\"_class\"\n      :id=\"id\"\n      :list=\"listId\"\n      :name=\"id\"\n      :placeholder=\"placeholder\"\n      :required=\"required\"\n      :type=\"_type\"\n      v-model=\"_value\"\n    />\n    <span />\n    <slot v-if=\"_type === InputType.SEARCH\" />\n  </KvccFormControl>\n</template>\n\n<style scoped>\ninput.valid {\n  border-color: var(--green);\n}\n\ninput.valid:focus {\n  border-color: var(--green-light);\n}\n\n/* hiding clear button (isn't visible in Firefox anyway) */\ninput::-webkit-search-cancel-button {\n  appearance: none;\n}\n\ninput + span {\n  position: relative;\n}\n\ninput + span::before {\n  position: absolute;\n  top: 0;\n  right: 1rem;\n  bottom: 0;\n  /* top: 5px; */\n}\n\ninput.valid + span::before {\n  content: \"âœ“\";\n  color: var(--green);\n}\n</style>\n"],"names":["InputType","emailRegexp","_value","ref","props","_type","computed","_class","handleInput","event","emit"],"mappings":"6RAAY,IAAAA,GAAAA,IACVA,EAAA,KAAO,OACPA,EAAA,MAAQ,QACRA,EAAA,SAAW,WACXA,EAAA,OAAS,SAJCA,IAAAA,GAAA,CAAA,CAAA,uTCwBNC,EACJ,uIAEIC,EAASC,EAAIC,EAAM,KAAK,EAExBC,EAAQC,EAAS,IAAOF,EAAM,KAAOA,EAAM,KAAOJ,EAAU,IAAK,EACjEO,EAASD,EAAS,KAAO,CAC7B,MAAOJ,EAAO,MAAQD,EAAY,KAAKC,EAAO,KAAK,EAAI,EACvD,EAAA,EAEIM,EAAeC,GAAiB,CAChC,GAAA,CAACA,EAAM,OAAQ,CACjB,QAAQ,MAAM,0BAA0B,EACxC,MACF,CAEKC,EAAA,QAAUD,EAAM,OAA4B,KAAK,CAAA"}